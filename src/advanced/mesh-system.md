# 网格系统

如果内置的元件无法满足你的制图需求，你可以考虑自行建模。

## 导入网格

在三维软件建模后，将网格导出为 `.fbx` 格式。

在 `素材 → 网格` 面板中，点击右栏加号，选择网格即可导入。导入的网格 `X` `Z` 两轴将被翻转。

::: tip

参见：[起步 → 制图器准备 → 坐标系统](/start/preparation.md#坐标系统)

为了提升性能，网格建议三角化面。

推荐使用 Cinema 4D 建模，新手也可从 Inventor 或 SOLIDWORKS 入手。但由于多位玩家的翻车经历，请谨慎使用 3ds Max。

对于不支持导出 `.fbx` 的建模软件，可导出其它格式的模型，导入 Cinema 4D 后再导出 `.fbx`。

已经确认可用的软件：

- Maxon Cinema 4D (R25, R24, ..., R17)
- Blender (3.1, 3.0, 2.93)
- SketchUp
- Autodesk Inventor (2020, `.obj`)
- Autodesk 3ds Max (2020, `.fbx`)
  - 3ds Max 导出的 `.fbx` 无法使用，但导入 Cinema 4D 后直接再导出就神奇地好了

:::

## 使用网格

从 `素材 → 网格` 面板将网格直接拖入场景即可，在 `检视器` 窗口中可添加材质并指定更多参数。

### `模型网格`

- 类型：`Mesh`
- 默认值：空

该元件**显示**的网格。

### `材质`

- 类型：`list[Material.PBR]`
- 默认值：`[]`

对应关系与建模软件中的设定一致。

### `碰撞箱类型`

- 类型：`enum`
- 默认值：`网格`

::: tip

网格模式的性能远低于另外两者，在效果满足期望的前提下，请优先选择长方体或球体模式。

:::

### `焊接碰撞箱` <badge text="物理体类型 = 静态"/>

- 类型：`bool`
- 默认值：`false`

启用该功能的邻近物体会自动优化碰撞箱，尝试修正细缝、错位、轻微穿模等微小问题。

::: danger

该功能可能导致诸多违背物理的表现，包括但不限于弹跳、单轨滑落、机关穿模。除非清楚自己在做什么，请勿使用。

:::

### `偏移`

- 类型：`float` `float` `float`
- 默认值：`0` `0` `0`

### `尺寸` <badge text="碰撞箱类型 = 长方体"/>

- 类型：`float` `float` `float`
- 默认值：`1` `1` `1`
- 限制：`x: x > 0` `y: y > 0` `z: z > 0`

### `圆角半径` <badge text="碰撞箱类型 = 长方体"/>

- 类型：`float`
- 默认值：`0.02`
- 限制：`r: r >= 0`

### `半径` <badge text="碰撞箱类型 = 球体"/>

- 类型：`float`
- 默认值：`0.5`
- 限制：`r: r > 0`

### `网格覆写` <badge text="碰撞箱类型 = 网格"/>

- 类型：`Mesh`
- 默认值：空

该元件**碰撞箱**的网格。如果未设定，将与显示网格一致。

### `物理体类型`

- 类型：`enum`
- 默认值：`静态`

各类型含义为：

- 静态：完全静止。如：地面
- 运动学刚体：静止，只能通过执行器调整位姿。如：移动路面
- 刚体：参与物理模拟，将受到各种力的影响。如：箱子
- 装饰：只显示外观，没有碰撞箱
- 碰撞箱：只有碰撞箱，在游戏中不显示。如：隐形路面

### `质量` <badge text="物理体类型 = 刚体"/>

- 类型：`float`
- 默认值：`1`
- 限制：`m: 0.001 <= m <= 10000`

### `密度` <badge text="物理体类型 = 刚体"/>

- 类型：`float`
- 默认值：`10`
- 限制：`ρ: 0.01 <= ρ <= 100`

### `线性阻力` <badge text="物理体类型 = 刚体"/>

- 类型：`float`
- 默认值：`0.5`
- 限制：`ζ: 0.001 <= ζ <= 10000`

### `旋转阻力` <badge text="物理体类型 = 刚体"/>

- 类型：`float`
- 默认值：`0.05`
- 限制：`ζ: 0.001 <= ζ <= 10000`

### `重力因数` <badge text="物理体类型 = 刚体"/>

- 类型：`float`
- 默认值：`1`
- 限制：`η: -10 <= η <= 10`

1 为正常重力，0 为无重力，负数为反重力。

### `物理材质`

- 类型：`enum`
- 默认值：`石`

影响弹力、表面摩擦系数等物理性质。

### `物理音频组`

- 类型：`enum`
- 默认值：`石`

影响碰撞音效等游戏效果。

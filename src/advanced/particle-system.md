# 粒子系统

`创建 → 粒子发射器`

## 参数

### `自动运行`

- 类型：`bool`
- 默认值：`true`

### `循环`

- 类型：`bool`
- 默认值：`true`

### `周期时长`

- 类型：`float`
- 默认值：`5`
- 限制：`t: t > 0`

### `生成速率`

- 类型：`float` `float`
- 默认值：`10` `20`
- 限制：`x: x > 0` `y: y > 0`

下一粒子的发射时间将由在该区间内均匀取得的随机值决定，负数将视为 `0`。两数不分顺序，相同表示固定，下同。

### `爆发数量`

- 类型：`float` `float`
- 默认值：`0` `0`

每一周期开始时，将有爆发粒子射出。每个爆发粒子的强度将在该区间内均匀取随机值，负数将视为 `0`。

### `发射器尺寸`

- 类型：`float` `float` `float`
- 默认值：`1` `1` `1`

粒子将在该区域内随机均匀生成，`0` 表示该轴上位置固定，负数表示反向。

### `初始速度`

- 类型：`float` `float`
- 默认值：`0` `5`

每个粒子将在该区间内均匀取随机值，负数表示反向。

### `初始旋转`

- 类型：`float` `float`
- 默认值：`0` `0`

每个粒子将在该区间内均匀取随机值，单位为弧度，正数表示顺时针。

### `角速度`

- 类型：`float` `float`
- 默认值：`0` `0`

每个粒子将在该区间内均匀取随机值，正数表示顺时针。

### `初始尺寸`

- 类型：`float` `float`
- 默认值：`0.5` `1`
- 限制：`x: x >= 0` `y: y >= 0`

每个粒子将在该区间内均匀取随机值，负数将视为 `0`。

### `生命长度`

- 类型：`float` `float`
- 默认值：`1` `2`
- 限制：`t1: t1 >= 0` `t2: t2 >= 0`

每个粒子将在该区间内均匀取随机值，负数将视为 `0`。

### `跟随摄像机`

- 类型：`bool`
- 默认值：`false`

粒子发射器将跟随摄像机移动和旋转。

### `跟随位置偏移` <badge text="跟随摄像机 = true"/>

- 类型：`float` `float` `float`
- 默认值：`0` `0` `0`

### `材质`

- 类型：`Material.Particle`
- 默认值：空

### `生命周期内颜色变化`

- 类型：`list[tuple[float, float, float, float]]`
- 默认值：`[(1, 1, 1, 1), (1, 0, 0, 0.5), (0, 0, 1, 1)]`
- 限制：`(r, g, b, τ): 0 <= r <= 1 and 0 <= g <= 1 and 0 <= b <= 1 and 0 <= τ <= 1`

`X` `Y` `Z` 对应 RGB 颜色，负数将视为 `0`，大于 1 的数将视为 `1`。

`W` 表示关键帧时间，遵循以下规则：

- 粒子生命起点为 `τ = 0`，终点为 `τ = 1`
- 负数将视为 `0`，大于 1 的数将视为 `1`
- 当存在多个时刻相同的关键帧时（包含上述超界的关键帧），只有第一个声明的关键帧有效
- 若起点处没有关键帧，取时间最早的关键帧参数值
- 若终点处没有关键帧，取时间最晚的关键帧参数值
- 相邻的两个关键帧之间，各参数线性变换

### `生命周期内透明度变化`

- 类型：`list[tuple[float, float]]`
- 默认值：`[(0, 0), (1, 0.2), (1, 0.7), (0, 1)]`
- 限制：`(α, τ) : 0 <= α <= 1 and 0 <= τ <= 1`

`X` 表示透明度，负数将视为 `0`，大于 1 的数将视为 `1`。

`Y` 表示关键帧时间，规则同上。

### `生命周期内尺寸变化`

- 类型：`list[tuple[float, float]]`
- 默认值：`[(0.3, 0), (1, 1)]`
- 限制：`(s, τ): s >= 0 and 0 <= τ <= 1`

`X` 表示相对于粒子 `初始尺寸` 的比例，负数将视为 `0`。

`Y` 表示关键帧时间，规则同上。

### `重力因数`

- 类型：`float`
- 默认值：`0`

### `紊流强度`

- 类型：`float`
- 默认值：`1`

### `紊流频率`

- 类型：`float`
- 默认值：`0.2`
- 限制：`f: f > 0`

### `横向动画格数` `纵向动画格数`

- 类型：`int` `int`
- 默认值：`1` `1`
- 限制：`m: 0 < m <= 32` `n: 0 < n <= 32`

按给定的格数切分材质图片，每格视为一帧，形成粒子动画。动画周期由粒子 `周期时长` 决定。

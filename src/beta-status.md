# Ballex² 公测进度

## 机制

- 所有拥有 Ballex 的玩家均可参与公测
- 目前最新版
  - 公测：`0.7.2 β` @ 2021/9/28
  - 内测：`0.7.2 β` @ 2021/9/28
- 系统要求为 Windows 10 x64 20H1 或更高版本，显卡需支持 DirectX 12
- 公测将在 Ballex² 正式发布前结束，届时测试通道将停止更新，正式版需单独购买
- 贡献突出的测试者有机会获得 Ballex² 激活码

## 按键与功能

::: tip

以下为默认键位，大多数按键可[在配置文件中修改](#键位)。

:::

### 四向视角摄像机模式操作

- 移动：`↑` `←` `↓` `→`
- 旋转视角：`A` 顺时针，`D` 逆时针
- 抬升视角：`Space`

### 自由视角摄像机模式操作

- 移动：`W` `A` `S` `D`
- 旋转视角：`鼠标`，遵循 FPS 准星移动方向
- 视角八向锁定：`Space`

### 通用功能

- 切换玩家球：`Tab`
- 暂停：`ESC`
- 自杀：`R`
- 重开：`P`
- 返回主界面：`F9`

### 测图功能

- 截图：`F5`，保存在 `%USERPROFILE%\AppData\LocalLow\Mushreb\Ballex²\Screenshots\`
- 变量检视器：`F6`

### 配置

`%USERPROFILE%\AppData\LocalLow\Mushreb\Ballex²\Settings\Settings.json`

::: tip

推荐使用 VSCode 并安装 Prettier 插件用于格式化 JSON 文件。

:::

- `invertCameraRotate`：反转四向视角摄像机模式视角旋转方向
- `targetFrameRate`：限定帧率
- `invertFreeLookCameraHorizontal`：反转自由视角摄像机模式视角水平旋转方向
- `invertFreeLookCameraVertical`：反转自由视角摄像机模式视角竖直移动方向
- `freeLookCameraHorizontalSensitivity`：自由视角摄像机模式视角水平旋转灵敏度
- `freeLookCameraVerticalSensitivity`：自由视角摄像机模式视角竖直移动灵敏度
- `screenshotResolution: { "x": *, "y": * }`：截图分辨率
- `gameResolution: { "x": *, "y": * }`：游戏分辨率
- `renderResolutionRate`：渲染比例
- `keys`：键位

### 键位

```json
{
  "keys": [
    "向前移动",
    "向后移动",
    "向左移动",
    "向右移动",
    "摄像机顺时针旋转",
    "摄像机逆时针旋转",
    "摄像机俯视",
    "功能键 1",
    "功能键 2",
    "功能键 3",
    "功能键 4",
    "自由视角向前移动",
    "自由视角向后移动",
    "自由视角向左移动",
    "自由视角向右移动"
  ]
}
```

::: tip

摄像机顺时针旋转，即为视角（你看到的东西）逆时针旋转，反之亦然。

如果需要交换旋转方向，请设置 `invertCameraRotate = true`，不要直接编辑键位。

:::

::: warning

请避免设置 `R` `P` `Tab`，功能键或小键盘。

:::

以下为一些常用配置：

```json
{
  // ↑ ↓ ← → D A _ Q W E S W S A D
  "keys": [63, 64, 61, 62, 18, 15, 1, 31, 37, 19, 33, 37, 33, 15, 18],
  // ↑ ↓ ← → D A _ Z X C V W S A D
  "keys": [63, 64, 61, 62, 18, 15, 1, 40, 38, 17, 36, 37, 33, 15, 18],
  // I K J L D A _ Q W E S W S A D
  "keys": [23, 25, 24, 26, 18, 15, 1, 31, 37, 19, 33, 37, 33, 15, 18],
  // W S A D L J _ U I O K W S A D
  "keys": [37, 33, 15, 18, 26, 24, 1, 35, 23, 29, 25, 37, 33, 15, 18],
  // W S A D E Q _ 1 2 3 4 W S A D
  "keys": [37, 33, 15, 18, 19, 31, 1, 41, 42, 43, 44, 37, 33, 15, 18],
  // W S ← → 1 ` ↑ M , . / W S A D
  "keys": [37, 33, 61, 62, 41, 4, 63, 27, 7, 8, 9, 37, 33, 15, 18]
}
```

::: details 按键与编号的对应关系

| 按键    | 编号 | 按键         | 编号 | 按键          | 编号 | 按键      | 编号 |
| ------- | ---- | ------------ | ---- | ------------- | ---- | --------- | ---- |
| 空      | 0    | `M`          | 27   | `RightAlt`    | 54   | `Numpad-` | 81   |
| `Space` | 1    | `N`          | 28   | `Ctrl`        | 55   | `Numpad.` | 82   |
| `Enter` | 2    | `O`          | 29   | `RightCtrl`   | 56   | `Numpad=` | 83   |
| `Tab`   | 3    | `P`          | 30   | `Win`         | 57   | `Numpad0` | 84   |
| `` ` `` | 4    | `Q`          | 31   | `RightWin`    | 58   | `Numpad1` | 85   |
| `'`     | 5    | `R`          | 32   | `Menu`        | 59   | `Numpad2` | 86   |
| `;`     | 6    | `S`          | 33   | `Esc`         | 60   | `Numpad3` | 87   |
| `,`     | 7    | `T`          | 34   | `←`           | 61   | `Numpad4` | 88   |
| `.`     | 8    | `U`          | 35   | `→`           | 62   | `Numpad5` | 89   |
| `/`     | 9    | `V`          | 36   | `↑`           | 63   | `Numpad6` | 90   |
| `\`     | 10   | `W`          | 37   | `↓`           | 64   | `Numpad7` | 91   |
| `[`     | 11   | `X`          | 38   | `Backspace`   | 65   | `Numpad8` | 92   |
| `]`     | 12   | `Y`          | 39   | `PageDown`    | 66   | `Numpad9` | 93   |
| `-`     | 13   | `Z`          | 40   | `PageUp`      | 67   | `F1`      | 94   |
| `=`     | 14   | `1`          | 41   | `Home`        | 68   | `F2`      | 95   |
| `A`     | 15   | `2`          | 42   | `End`         | 69   | `F3`      | 96   |
| `B`     | 16   | `3`          | 43   | `Insert`      | 70   | `F4`      | 97   |
| `C`     | 17   | `4`          | 44   | `Delete`      | 71   | `F5`      | 98   |
| `D`     | 18   | `5`          | 45   | `CapsLock`    | 72   | `F6`      | 99   |
| `E`     | 19   | `6`          | 46   | `NumLock`     | 73   | `F7`      | 100  |
| `F`     | 20   | `7`          | 47   | `PrintScreen` | 74   | `F8`      | 101  |
| `G`     | 21   | `8`          | 48   | `ScrollLock`  | 75   | `F9`      | 102  |
| `H`     | 22   | `9`          | 49   | `Pause`       | 76   | `F10`     | 103  |
| `I`     | 23   | `0`          | 50   | `NumpadEnter` | 77   | `F11`     | 104  |
| `J`     | 24   | `Shift`      | 51   | `Numpad/`     | 78   | `F12`     | 105  |
| `K`     | 25   | `RightShift` | 52   | `Numpad*`     | 79   |           |      |
| `L`     | 26   | `Alt`        | 53   | `Numpad+`     | 80   |           |      |

:::

## 更新日志

### `0.7.2 β` @ 2021/9/28

- 新增自由视角摄像机模式的键位设置
- 游戏内显示地图名
- 内置图改动
  - 官方图第一关改为雪天
  - Aeka《First Try》细节修正
  - 新增 Aeka 制作的休闲图《Strato Run》
  - 新增迪兰特制作的逻辑图《原》
  - 新增 Ding~ao 制作的观赏图《木球终末旅行·顶层》
  - 新增 Matt 制作的技术图
  - 新增 Z Red 制作的休闲图

### `0.7.2b2 α` @ 2021/9/20

- 新增键位设置
- 调整游戏内视距
- 微调球和部分机关的参数
- 修复重开后分数球粒子不销毁的问题
- 修改追踪分数球在重生时的出现位置
- 内置素材增加球材质

### `0.7.2 α` @ 2021/9/19

- 默认摄像机偏移从 `(0, 3.5, -4.25)` 改为 `(0, 4, -3.5)`
- 新增增球器动画
- 调整非当前玩家球触碰检查点、终点、变球器、增球器时的逻辑
- 调整死亡和通关时追踪分数球的逻辑
- 下调部分材质摩擦力
- 修复冰球能吃到电球的问题
- 新增返回主界面的快捷键
- 修复截图功能的一些问题
- 修复游戏暂停时部分音效不暂停的问题

### `0.7.1b2 α` `0.7.1 β` @ 2021/9/17

- 修复自由视角摄像机模式无法截图的问题
- 新增素材文件夹收藏功能
- 新增导入素材文件夹功能
- 移除拖放导入功能
- 修复 `素材` 窗口切换面板时不自动选中默认文件夹的问题
- 修复制图器界面毛玻璃效果
- 内置 Aeka 制作的观赏图

### `0.7.1 α` @ 2021/9/17

- 内置所有官方元件，显示为蓝色文件夹
- 新增落石机关
- 新增焊接碰撞箱功能
- 修复路面生成器的选区问题
- 修复路面生成器宽度变化且设有凹陷时的纹理变形问题
- 修复柱子渐隐效果的渲染问题

### `0.7.0b2 α` `0.7.0 β` @ 2021/9/12

- 切换摄像机目标执行器
  - 修复生命开始时摄像机不归位的问题
  - 修复目标被摧毁时摄像机不归位的问题
  - 修复摄像机视角微动始终基于玩家球速度的问题

### `0.7.0 α` @ 2021/9/12

- 新增变量机制
- 触发器
  - 新增物理帧触发器
  - 按键触发器新增开关模式
  - 按键触发器可引用玩家键位
- 新增执行器
  - 设置摄像机偏移
  - 设置变量值
  - 比较变量
  - 禁用玩家按键
  - 更改摄像机目标
- 修复截图文件夹不存在时截图卡死的问题
- 视角模式设定移至导出窗口中
- 内置 MushREB 制作的休闲图

### `0.6.8b2 α` @ 2021/9/11

- 修复天空盒不显示的问题
- 修复岩石、楼梯等元件的碰撞箱

### `0.6.8 β` @ 2021/9/10

- 第一个公测版本
- 内置 z2414 制作的休闲图
